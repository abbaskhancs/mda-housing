{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T09:49:17.186Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T09:49:17.194Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T09:49:17.195Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T09:51:17.948Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T09:51:17.957Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T09:51:17.958Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T09:51:18.982Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T09:51:24.273Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T09:52:43.595Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:19:51.138Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:19:51.149Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:19:51.150Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:22:37.477Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:22:37.488Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:22:37.489Z"}
{"level":"error","message":"Login error: JWT_SECRET not configured","service":"mda-housing-api","stack":"Error: JWT_SECRET not configured\n    at generateToken (C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\auth.js:37:15)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\auth.js:88:23","timestamp":"2025-09-06T11:22:39.279Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:23:33.414Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:23:33.424Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:23:33.426Z"}
{"level":"error","message":"Login error: JWT_SECRET not configured","service":"mda-housing-api","stack":"Error: JWT_SECRET not configured\n    at generateToken (C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\auth.js:37:15)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\auth.js:88:23","timestamp":"2025-09-06T11:23:46.026Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:24:42.419Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:24:42.425Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:24:42.429Z"}
{"level":"error","message":"Login error: JWT_SECRET not configured","service":"mda-housing-api","stack":"Error: JWT_SECRET not configured\n    at generateToken (C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\auth.js:37:15)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\auth.js:91:23","timestamp":"2025-09-06T11:24:45.932Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T11:25:01.805Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:25:20.432Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:25:20.439Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:25:20.446Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:25:44.481Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:25:44.488Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:25:44.489Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:30:54.666Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:30:54.682Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:30:54.685Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:32:19.315Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:32:19.327Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:32:19.328Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T11:32:22.883Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T11:33:13.881Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T11:33:13.918Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T11:33:13.946Z"}
{"level":"warn","message":"Unknown guard: UNKNOWN_GUARD","service":"mda-housing-api","timestamp":"2025-09-06T12:26:26.270Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-06T18:32:13.324Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-06T18:32:13.329Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-06T18:32:13.329Z"}
{"level":"info","message":"Created bucket: mda-housing-documents","service":"mda-housing-api","timestamp":"2025-09-06T18:32:13.586Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T18:32:14.743Z"}
{"level":"info","message":"User admin logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:32:23.797Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-06T18:33:11.323Z"}
{"level":"info","message":"User admin logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:33:14.526Z"}
{"level":"info","message":"File uploaded successfully: applications/cmf8lqsqx0003mtiow0s8m3dn/attachments/IntakeReceipt_1757183597124.html","service":"mda-housing-api","timestamp":"2025-09-06T18:33:17.209Z"}
{"level":"info","message":"Intake receipt generated for application cmf8lqsqx0003mtiow0s8m3dn: http://localhost:9000/mda-housing-documents/applications/cmf8lqsqx0003mtiow0s8m3dn/attachments/IntakeReceipt_1757183597124.html","service":"mda-housing-api","timestamp":"2025-09-06T18:33:17.211Z"}
{"level":"info","message":"Receipt record created for application cmf8lqsqx0003mtiow0s8m3dn","service":"mda-housing-api","timestamp":"2025-09-06T18:33:17.228Z"}
{"level":"info","message":"Intake receipt generated for application cmf8lqsqx0003mtiow0s8m3dn","service":"mda-housing-api","timestamp":"2025-09-06T18:33:17.243Z"}
{"level":"info","message":"Application created: cmf8lqsqx0003mtiow0s8m3dn by user admin with 0 attachments","service":"mda-housing-api","timestamp":"2025-09-06T18:33:17.249Z"}
{"level":"info","message":"User owo_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:33:18.747Z"}
{"level":"info","message":"User bca_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:33:19.964Z"}
{"level":"info","message":"User housing_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:33:21.110Z"}
{"level":"info","message":"User accounts_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:33:22.139Z"}
{"level":"info","message":"User approver logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:33:24.066Z"}
{"level":"warn","message":"Unknown guard: UNKNOWN_GUARD","service":"mda-housing-api","timestamp":"2025-09-06T18:36:03.220Z"}
{"level":"error","message":"GUARD_INTAKE_COMPLETE error: Database error","service":"mda-housing-api","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\test\\guards.test.ts:674:51)\n    at Promise.then.completed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-runner\\build\\runTest.js:444:34)","timestamp":"2025-09-06T18:36:03.384Z"}
{"level":"info","message":"User admin logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:38:16.331Z"}
{"level":"info","message":"User owo_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:38:16.940Z"}
{"level":"info","message":"User bca_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:38:17.605Z"}
{"level":"info","message":"User housing_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:38:18.143Z"}
{"level":"info","message":"User accounts_officer logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:38:18.747Z"}
{"level":"info","message":"User approver logged in successfully","service":"mda-housing-api","timestamp":"2025-09-06T18:38:19.319Z"}
{"level":"info","message":"File uploaded successfully: applications/cmf8lxa6w000cmtio1fmqqh1d/attachments/IntakeReceipt_1757183899372.html","service":"mda-housing-api","timestamp":"2025-09-06T18:38:19.394Z"}
{"level":"info","message":"Intake receipt generated for application cmf8lxa6w000cmtio1fmqqh1d: http://localhost:9000/mda-housing-documents/applications/cmf8lxa6w000cmtio1fmqqh1d/attachments/IntakeReceipt_1757183899372.html","service":"mda-housing-api","timestamp":"2025-09-06T18:38:19.395Z"}
{"level":"info","message":"Receipt record created for application cmf8lxa6w000cmtio1fmqqh1d","service":"mda-housing-api","timestamp":"2025-09-06T18:38:19.409Z"}
{"level":"info","message":"Intake receipt generated for application cmf8lxa6w000cmtio1fmqqh1d","service":"mda-housing-api","timestamp":"2025-09-06T18:38:19.414Z"}
{"level":"info","message":"Application created: cmf8lxa6w000cmtio1fmqqh1d by user admin with 0 attachments","service":"mda-housing-api","timestamp":"2025-09-06T18:38:19.430Z"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\workflow.js:165:50","timestamp":"2025-09-06T18:38:19.528Z","url":"/api/workflow/transitions?from=SUBMITTED&applicationId=cmf8lxa6w000cmtio1fmqqh1d&dryRun=true","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\workflow.js:165:50","timestamp":"2025-09-06T18:38:19.595Z","url":"/api/workflow/transitions?from=SUBMITTED&applicationId=cmf8lxa6w000cmtio1fmqqh1d&dryRun=true","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\workflow.js:313:46","timestamp":"2025-09-06T18:38:19.618Z","url":"/api/workflow/applications/cmf8lxa6w000cmtio1fmqqh1d/transition","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\workflow.js:165:50","timestamp":"2025-09-06T18:38:19.640Z","url":"/api/workflow/transitions?from=UNDER_SCRUTINY&applicationId=cmf8lxa6w000cmtio1fmqqh1d&dryRun=true","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\applications.js:505:46","timestamp":"2025-09-06T18:38:19.659Z","url":"/api/applications/cmf8lxa6w000cmtio1fmqqh1d/clearances","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\applications.js:505:46","timestamp":"2025-09-06T18:38:19.677Z","url":"/api/applications/cmf8lxa6w000cmtio1fmqqh1d/clearances","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\applications.js:887:46","timestamp":"2025-09-06T18:38:19.719Z","url":"/api/applications/cmf8lxa6w000cmtio1fmqqh1d/transfer-deed/draft","userAgent":"node"}
{"error":"Application not found","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Application not found\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\dist\\middleware\\errorHandler.js:18:12)\n    at C:\\Abbas\\Coding\\MDA_Housing\\dist\\routes\\applications.js:955:46","timestamp":"2025-09-06T18:38:19.730Z","url":"/api/applications/cmf8lxa6w000cmtio1fmqqh1d/transfer-deed/finalize","userAgent":"node"}
{"level":"warn","message":"Unknown guard: UNKNOWN_GUARD","service":"mda-housing-api","timestamp":"2025-09-06T18:44:41.147Z"}
{"level":"error","message":"GUARD_INTAKE_COMPLETE error: Database error","service":"mda-housing-api","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\test\\guards.test.ts:674:51)\n    at Promise.then.completed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","timestamp":"2025-09-06T18:44:41.327Z"}
{"level":"info","message":"Storage service initialized with bucket: mda-housing-documents","service":"mda-housing-api","timestamp":"2025-09-06T19:07:06.363Z"}
{"level":"info","message":"File uploaded successfully: documents/1757185635485-46301d0b97e1f5e0-APP-2024-001-intake-receipt-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:07:15.939Z"}
{"clientVersion":"5.22.0","code":"P2003","level":"error","message":"Failed to generate document: \nInvalid `prisma.document.upsert()` invocation in\nC:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\services\\documentService.ts:84:46\n\n  81 const downloadUrl = storageService.generateDownloadUrl(applicationId, expiresInHours * 3600);\n  82 \n  83 // Save to database\n→ 84 const document = await prisma.document.upsert(\nForeign key constraint violated: `foreign key`","meta":{"field_name":"foreign key","modelName":"Document"},"name":"PrismaClientKnownRequestError","service":"mda-housing-api","stack":"PrismaClientKnownRequestError: \nInvalid `prisma.document.upsert()` invocation in\nC:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\services\\documentService.ts:84:46\n\n  81 const downloadUrl = storageService.generateDownloadUrl(applicationId, expiresInHours * 3600);\n  82 \n  83 // Save to database\n→ 84 const document = await prisma.document.upsert(\nForeign key constraint violated: `foreign key`\n    at $n.handleRequestError (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at async l (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at async DocumentService.generateDocument (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\services\\documentService.ts:84:24)\n    at async testSignedDownloads (C:\\Abbas\\Coding\\MDA_Housing\\test-signed-downloads.temp.ts:60:27)","timestamp":"2025-09-06T19:07:16.737Z"}
{"level":"info","message":"File storage initialized at: C:\\Abbas\\Coding\\MDA_Housing\\storage","service":"mda-housing-api","timestamp":"2025-09-06T19:19:01.214Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757186341220-40b3d3efbac86267-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:01.230Z"}
{"level":"info","message":"File downloaded successfully: documents/1757186341220-40b3d3efbac86267-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:01.236Z"}
{"level":"info","message":"File deleted successfully: documents/1757186341220-40b3d3efbac86267-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:01.239Z"}
{"level":"info","message":"File storage initialized at: C:\\Abbas\\Coding\\MDA_Housing\\storage","service":"mda-housing-api","timestamp":"2025-09-06T19:19:18.248Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757186358266-f0abdca5445671a9-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:18.272Z"}
{"level":"info","message":"File downloaded successfully: documents/1757186358266-f0abdca5445671a9-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:18.283Z"}
{"level":"info","message":"File deleted successfully: documents/1757186358266-f0abdca5445671a9-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:18.319Z"}
{"level":"info","message":"File storage initialized at: C:\\Abbas\\Coding\\MDA_Housing\\storage","service":"mda-housing-api","timestamp":"2025-09-06T19:19:45.785Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757186385795-408ad4318bdd870d-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:45.805Z"}
{"level":"info","message":"File downloaded successfully: documents/1757186385795-408ad4318bdd870d-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:45.817Z"}
{"level":"info","message":"File deleted successfully: documents/1757186385795-408ad4318bdd870d-test-signed-download.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:19:45.821Z"}
{"level":"info","message":"File storage initialized at: C:\\Abbas\\Coding\\MDA_Housing\\storage","service":"mda-housing-api","timestamp":"2025-09-06T19:39:46.628Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187603310-af32f581b1e9d7ec-cmf8o4c350004s22qpnd3ogdi-intake-receipt-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:03.315Z"}
{"level":"info","message":"Document generated successfully: INTAKE_RECEIPT for application cmf8o4c350004s22qpnd3ogdi","service":"mda-housing-api","timestamp":"2025-09-06T19:40:03.347Z"}
{"level":"info","message":"File downloaded successfully: documents/1757187603310-af32f581b1e9d7ec-cmf8o4c350004s22qpnd3ogdi-intake-receipt-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:03.405Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187609766-757d8b737e2266c4-cmf8o4c350004s22qpnd3ogdi-bca-clearance-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:09.771Z"}
{"level":"info","message":"Document generated successfully: BCA_CLEARANCE for application cmf8o4c350004s22qpnd3ogdi","service":"mda-housing-api","timestamp":"2025-09-06T19:40:09.815Z"}
{"level":"info","message":"File downloaded successfully: documents/1757187609766-757d8b737e2266c4-cmf8o4c350004s22qpnd3ogdi-bca-clearance-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:09.879Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187612145-cfc72ecaf48daef3-cmf8o4c350004s22qpnd3ogdi-housing-clearance-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:12.147Z"}
{"level":"info","message":"Document generated successfully: HOUSING_CLEARANCE for application cmf8o4c350004s22qpnd3ogdi","service":"mda-housing-api","timestamp":"2025-09-06T19:40:12.177Z"}
{"level":"info","message":"File downloaded successfully: documents/1757187612145-cfc72ecaf48daef3-cmf8o4c350004s22qpnd3ogdi-housing-clearance-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:12.214Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187614506-aedc1bde3a138439-cmf8o4c350004s22qpnd3ogdi-challan-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:14.508Z"}
{"level":"info","message":"Document generated successfully: CHALLAN for application cmf8o4c350004s22qpnd3ogdi","service":"mda-housing-api","timestamp":"2025-09-06T19:40:14.531Z"}
{"level":"info","message":"File downloaded successfully: documents/1757187614506-aedc1bde3a138439-cmf8o4c350004s22qpnd3ogdi-challan-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:14.586Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187616963-b64d75b7ee6f3de0-cmf8o4c350004s22qpnd3ogdi-dispatch-memo-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:16.967Z"}
{"level":"info","message":"Document generated successfully: DISPATCH_MEMO for application cmf8o4c350004s22qpnd3ogdi","service":"mda-housing-api","timestamp":"2025-09-06T19:40:16.993Z"}
{"level":"info","message":"File downloaded successfully: documents/1757187616963-b64d75b7ee6f3de0-cmf8o4c350004s22qpnd3ogdi-dispatch-memo-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:17.030Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187619307-a2290ddb85379439-cmf8o4c350004s22qpnd3ogdi-transfer-deed-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:19.309Z"}
{"level":"info","message":"Document generated successfully: TRANSFER_DEED for application cmf8o4c350004s22qpnd3ogdi","service":"mda-housing-api","timestamp":"2025-09-06T19:40:19.335Z"}
{"level":"info","message":"File downloaded successfully: documents/1757187619307-a2290ddb85379439-cmf8o4c350004s22qpnd3ogdi-transfer-deed-2025-09-06.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:19.375Z"}
{"level":"info","message":"File uploaded successfully: C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187642401-a8e1a2443f2699b2-milestone-test-file.pdf","service":"mda-housing-api","timestamp":"2025-09-06T19:40:42.405Z"}
{"code":"ENOENT","errno":-4058,"level":"error","message":"Failed to download file: ENOENT: no such file or directory, open 'C:\\Abbas\\Coding\\MDA_Housing\\storage\\C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187642401-a8e1a2443f2699b2-milestone-test-file.pdf'","path":"C:\\Abbas\\Coding\\MDA_Housing\\storage\\C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187642401-a8e1a2443f2699b2-milestone-test-file.pdf","service":"mda-housing-api","stack":"Error: ENOENT: no such file or directory, open 'C:\\Abbas\\Coding\\MDA_Housing\\storage\\C:\\Abbas\\Coding\\MDA_Housing\\storage\\documents\\1757187642401-a8e1a2443f2699b2-milestone-test-file.pdf'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.readFile (node:internal/fs/promises:1243:14)\n    at async FileStorageService.downloadFile (C:\\Abbas\\Coding\\MDA_Housing\\dist\\services\\fileStorageService.js:53:28)\n    at async testMilestone31 (C:\\Abbas\\Coding\\MDA_Housing\\test-milestone-3-1-simple.js:336:32)","syscall":"open","timestamp":"2025-09-06T19:40:42.419Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-07T17:02:53.249Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-07T17:02:53.262Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-07T17:02:53.267Z"}
{"level":"info","message":"Health check requested","service":"mda-housing-api","timestamp":"2025-09-07T17:03:18.997Z"}
{"level":"warn","message":"Login attempt with invalid username: admin@gmail.com","service":"mda-housing-api","timestamp":"2025-09-07T17:04:10.848Z"}
{"error":"Invalid credentials","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Invalid credentials\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\routes\\auth.ts:50:22","timestamp":"2025-09-07T17:04:10.858Z","url":"/api/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
{"level":"warn","message":"Login attempt with invalid username: admin@gmail.com","service":"mda-housing-api","timestamp":"2025-09-07T17:04:21.467Z"}
{"error":"Invalid credentials","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Invalid credentials\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\routes\\auth.ts:50:22","timestamp":"2025-09-07T17:04:21.469Z","url":"/api/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
{"level":"warn","message":"Login attempt with invalid username: admin@gmail.com","service":"mda-housing-api","timestamp":"2025-09-07T17:04:22.886Z"}
{"error":"Invalid credentials","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Invalid credentials\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\routes\\auth.ts:50:22","timestamp":"2025-09-07T17:04:22.887Z","url":"/api/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
{"error":"JWT_SECRET not configured","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: JWT_SECRET not configured\n    at generateToken (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\routes\\auth.ts:23:11)\n    at C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\routes\\auth.ts:72:17","timestamp":"2025-09-07T17:04:30.058Z","url":"/api/auth/login","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-07T17:05:59.971Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-07T17:05:59.978Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-07T17:05:59.981Z"}
{"level":"info","message":"User admin logged in successfully","service":"mda-housing-api","timestamp":"2025-09-07T17:06:01.886Z"}
{"level":"info","message":"User admin logged in successfully","service":"mda-housing-api","timestamp":"2025-09-07T17:40:37.171Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-08T05:39:09.432Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-08T05:39:09.442Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-08T05:39:09.449Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-08T05:40:38.047Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-08T05:40:38.069Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-08T05:40:38.085Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-08T05:41:33.167Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-08T05:41:33.184Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-08T05:41:33.193Z"}
{"level":"info","message":"🚀 MDA Housing API server running on port 3001","service":"mda-housing-api","timestamp":"2025-09-08T05:43:31.600Z"}
{"level":"info","message":"📊 Health check available at http://localhost:3001/health","service":"mda-housing-api","timestamp":"2025-09-08T05:43:31.608Z"}
{"level":"info","message":"🌍 Environment: development","service":"mda-housing-api","timestamp":"2025-09-08T05:43:31.609Z"}
{"level":"info","message":"Person with CNIC 12345-1234567-1 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.813Z"}
{"level":"info","message":"New person created: AMIR (12341-2341231-2)","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.845Z"}
{"level":"info","message":"Plot P-001 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.859Z"}
{"level":"info","message":"File uploaded successfully: applications/cmfap7nwn0004t792nqt5haca/attachments/IntakeReceipt_1757310354929.html","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.958Z"}
{"level":"info","message":"Intake receipt generated for application cmfap7nwn0004t792nqt5haca: http://localhost:9000/mda-housing-documents/applications/cmfap7nwn0004t792nqt5haca/attachments/IntakeReceipt_1757310354929.html","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.958Z"}
{"level":"info","message":"Receipt record created for application cmfap7nwn0004t792nqt5haca","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.966Z"}
{"level":"info","message":"Intake receipt generated for application cmfap7nwn0004t792nqt5haca","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.967Z"}
{"level":"info","message":"Application created: cmfap7nwn0004t792nqt5haca by user admin with 0 attachments","service":"mda-housing-api","timestamp":"2025-09-08T05:45:54.969Z"}
{"code":"INVALID_DOC_TYPE","level":"error","message":"File upload error: Invalid or missing document type","service":"mda-housing-api","stack":"Error: Invalid or missing document type\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at fileFilter (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\upload.ts:31:26)\n    at wrappedFileFilter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\index.js:44:7)\n    at Multipart.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at Multipart.emit (node:domain:489:12)\n    at HeaderParser.cb (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\streamsearch\\lib\\sbmh.js:248:10)","statusCode":400,"storageErrors":[],"timestamp":"2025-09-08T05:45:55.011Z"}
{"error":"Invalid or missing document type","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Invalid or missing document type\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at fileFilter (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\upload.ts:31:26)\n    at wrappedFileFilter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\index.js:44:7)\n    at Multipart.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at Multipart.emit (node:domain:489:12)\n    at HeaderParser.cb (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\streamsearch\\lib\\sbmh.js:248:10)","timestamp":"2025-09-08T05:45:55.016Z","url":"/api/applications/cmfap7nwn0004t792nqt5haca/attachments","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"}
{"level":"info","message":"Person with CNIC 12345-1234567-1 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.860Z"}
{"level":"info","message":"Person with CNIC 12341-2341231-2 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.875Z"}
{"level":"info","message":"Plot P-001 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.886Z"}
{"level":"info","message":"File uploaded successfully: applications/cmfap9qrg000dt7928poejjop/attachments/IntakeReceipt_1757310451913.html","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.920Z"}
{"level":"info","message":"Intake receipt generated for application cmfap9qrg000dt7928poejjop: http://localhost:9000/mda-housing-documents/applications/cmfap9qrg000dt7928poejjop/attachments/IntakeReceipt_1757310451913.html","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.920Z"}
{"level":"info","message":"Receipt record created for application cmfap9qrg000dt7928poejjop","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.928Z"}
{"level":"info","message":"Intake receipt generated for application cmfap9qrg000dt7928poejjop","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.928Z"}
{"level":"info","message":"Application created: cmfap9qrg000dt7928poejjop by user admin with 0 attachments","service":"mda-housing-api","timestamp":"2025-09-08T05:47:31.929Z"}
{"code":"INVALID_DOC_TYPE","level":"error","message":"File upload error: Invalid or missing document type","service":"mda-housing-api","stack":"Error: Invalid or missing document type\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at fileFilter (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\upload.ts:31:26)\n    at wrappedFileFilter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\index.js:44:7)\n    at Multipart.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at Multipart.emit (node:domain:489:12)\n    at HeaderParser.cb (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\streamsearch\\lib\\sbmh.js:248:10)","statusCode":400,"storageErrors":[],"timestamp":"2025-09-08T05:47:31.941Z"}
{"error":"Invalid or missing document type","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Invalid or missing document type\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at fileFilter (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\upload.ts:31:26)\n    at wrappedFileFilter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\index.js:44:7)\n    at Multipart.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at Multipart.emit (node:domain:489:12)\n    at HeaderParser.cb (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\streamsearch\\lib\\sbmh.js:248:10)","timestamp":"2025-09-08T05:47:31.944Z","url":"/api/applications/cmfap9qrg000dt7928poejjop/attachments","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"}
{"level":"info","message":"Person with CNIC 12345-1234567-1 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:47:37.958Z"}
{"level":"info","message":"Person with CNIC 12341-2341231-2 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:47:37.966Z"}
{"level":"info","message":"Plot P-001 already exists, returning existing record","service":"mda-housing-api","timestamp":"2025-09-08T05:47:37.976Z"}
{"level":"info","message":"File uploaded successfully: applications/cmfap9vgj000mt792paq1xtqv/attachments/IntakeReceipt_1757310457997.html","service":"mda-housing-api","timestamp":"2025-09-08T05:47:38.005Z"}
{"level":"info","message":"Intake receipt generated for application cmfap9vgj000mt792paq1xtqv: http://localhost:9000/mda-housing-documents/applications/cmfap9vgj000mt792paq1xtqv/attachments/IntakeReceipt_1757310457997.html","service":"mda-housing-api","timestamp":"2025-09-08T05:47:38.005Z"}
{"level":"info","message":"Receipt record created for application cmfap9vgj000mt792paq1xtqv","service":"mda-housing-api","timestamp":"2025-09-08T05:47:38.013Z"}
{"level":"info","message":"Intake receipt generated for application cmfap9vgj000mt792paq1xtqv","service":"mda-housing-api","timestamp":"2025-09-08T05:47:38.013Z"}
{"level":"info","message":"Application created: cmfap9vgj000mt792paq1xtqv by user admin with 0 attachments","service":"mda-housing-api","timestamp":"2025-09-08T05:47:38.015Z"}
{"code":"INVALID_DOC_TYPE","level":"error","message":"File upload error: Invalid or missing document type","service":"mda-housing-api","stack":"Error: Invalid or missing document type\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at fileFilter (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\upload.ts:31:26)\n    at wrappedFileFilter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\index.js:44:7)\n    at Multipart.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at Multipart.emit (node:domain:489:12)\n    at HeaderParser.cb (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\streamsearch\\lib\\sbmh.js:248:10)","statusCode":400,"storageErrors":[],"timestamp":"2025-09-08T05:47:38.028Z"}
{"error":"Invalid or missing document type","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"mda-housing-api","stack":"Error: Invalid or missing document type\n    at createError (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\errorHandler.ts:28:10)\n    at fileFilter (C:\\Abbas\\Coding\\MDA_Housing\\backend\\src\\middleware\\upload.ts:31:26)\n    at wrappedFileFilter (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\index.js:44:7)\n    at Multipart.<anonymous> (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:518:28)\n    at Multipart.emit (node:domain:489:12)\n    at HeaderParser.cb (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Abbas\\Coding\\MDA_Housing\\node_modules\\streamsearch\\lib\\sbmh.js:248:10)","timestamp":"2025-09-08T05:47:38.031Z","url":"/api/applications/cmfap9vgj000mt792paq1xtqv/attachments","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"}
